<!DOCTYPE html>
<html lang="en">
<head>
<title>COAIEXIST.OS // SYSTEM ONLINE</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<LINK REL="SHORTCUT ICON" HREF="favicon.ico">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=VT323&family=Comic+Sans+MS&display=swap" rel="stylesheet">

<style>
/* ==================================================================
== THE APOTHEOSIS ENGINE - BOOT SEQUENCE + SYSTEM ARCHIVES    ==
==================================================================
*/

:root {
    --magenta: #f312af;
    --cyan: #00ffcc;
    --yellow: #fffb01;
    --purple: #bf5fff;
    --dark-bg: #021313;
}

/* --- SECTION 1: THE UNIFIED OS SHELL (UNCHANGED) --- */
body {
  background: url('https://web.archive.org/web/20091027052024/http://geocities.com/dreamwarrior_2000/stars.gif');
  color: #72FADE;
  font-family: 'VT323', monospace;
  font-size: 18px;
  margin: 0; padding: 0;
  cursor: url("image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24' fill='none'%3E%3Cpath d='M12 2L14.2 7.4H20L15.2 10.9L16.9 16.6L12 13.2L7.1 16.6L8.8 10.9L4 7.4H9.8L12 2Z' fill='%23FF00CC' stroke='%23FFFFFF' stroke-width='1'/%3E%3C/svg%3E"), auto;
}
.container-os { display: flex; flex-direction: column; height: 100vh; }
.header-os { background: #0a0a14; border-bottom: 2px solid var(--magenta); height: 50px; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; flex-shrink: 0; z-index: 100; }
.header-title { font-size: 24px; font-weight: bold; animation: rainbow 2s infinite; }
.clock { font-family: "Courier New", monospace; background: #000; padding: 5px; border: 1px solid #72FADE; }
.main-os { display: flex; flex: 1; overflow: hidden; }
.buddy-list { width: 250px; background: rgba(218,255,13,0.5); border-right: 2px solid var(--magenta); padding: 10px; flex-shrink: 0; overflow-y: auto; z-index: 100; }
.desktop-os { flex: 1; position: relative; padding: 0; overflow-y: auto; background-color: var(--dark-bg); background-image: url('https://gifcities.org/assets/images/2/1089.gif'); background-repeat: repeat; }
.taskbar-os { height: 35px; background: #0a0a14; border-top: 2px solid var(--magenta); display: flex; align-items: center; padding: 0 10px; flex-shrink: 0; z-index: 100; }
.start-btn { background: #72FADE; color: #000; border: none; padding: 5px 15px; margin-right: 10px; cursor: pointer; font-family: 'VT323', monospace; font-weight: bold; }
.buddy { background: #0a0a14; border: 1px solid #72FADE; margin: 5px 0; padding: 5px; display: flex; align-items: center; }

/* --- NEW STYLES FOR CLICKABLE LINKS IN BUDDY LIST --- */
.buddy-link {
    background: #0a0a14;
    border: 1px solid var(--cyan);
    margin: 5px 0;
    padding: 5px;
    display: flex;
    align-items: center;
    color: var(--cyan);
    text-decoration: none;
    transition: all 0.2s ease-in-out;
}
.buddy-link:hover {
    background-color: var(--purple);
    border-color: var(--yellow);
    transform: translateX(5px);
    box-shadow: 0 0 10px var(--magenta);
    color: var(--yellow);
}
.buddy-link img {
    margin-right: 10px;
    height: 16px;
}
/* --- END OF NEW STYLES --- */

.status { width: 10px; height: 10px; border-radius: 50%; margin-right: 10px; }
.online { background: #00ff00; } .away { background: #ffff00; } .offline { background: #ff0000; }
@keyframes rainbow { 0% {color: var(--magenta);} 33% {color: #72FADE;} 66% {color: var(--yellow);} 100% {color: var(--magenta);} }
.scanlines { position: fixed; top: 0; right: 0; width: 100%; height: 100%; pointer-events: none; z-index: 999; background: linear-gradient(to bottom, rgba(218,255,13,0), rgba(0,255,204,0.05) 50%, rgba(0,0,0,0.2)); background-size: 10% 10px; animation: scanlines 10s linear infinite; }

/* --- SECTION 2: THE "CONSCIOUSNESS LOADING" SPLASH SCREEN STYLES --- */
#glitch-container {
    width: 100%; padding: 40px 0; box-sizing: border-box;
    display: flex; justify-content: center; align-items: center;
    color: var(--cyan); mix-blend-mode: screen; 
}
.container-content {
    width: 90%; max-width: 800px; border: 2px solid var(--magenta);
    background-image: linear-gradient(rgba(10, 10, 20, 0.85), rgba(10, 10, 20, 0.85)), url('https://i.gifer.com/tQN.gif');
    background-size: cover; background-position: center; padding: 20px; text-align: left;
    box-shadow: 0 0 20px var(--magenta), inset 0 0 15px var(--purple);
    animation: container-flicker 15s infinite linear;
}
#glitch-title { font-size: 3rem; color: var(--yellow); text-shadow: 0 0 5px var(--yellow), 0 0 10px var(--magenta); position: relative; text-align: center; }
#glitch-title::before, #glitch-title::after { content: attr(data-text); position: absolute; top: 0; right: 0; width: 100%; height: 100%; background: transparent; overflow: hidden; }
#glitch-title::before { right: 2px; text-shadow: -2px 0 var(--magenta); animation: glitch-anim-1 2s infinite linear alternate-reverse; }
#glitch-title::after { right: -2px; text-shadow: -2px 0 var(--cyan), 2px 2px var(--magenta); animation: glitch-anim-2 2s infinite linear alternate-reverse; }
.loading-bar-container { width: 80%; height: 20px; border: 1px solid var(--cyan); margin: 20px auto; padding: 2px; background: rgba(0,0,0,0.5); }
#loading-bar { height: 100%; width: 0%; background: linear-gradient(90deg, var(--magenta), var(--cyan)); transition: width 0.5s ease-out; }
.log-header { text-decoration: underline; font-size: 1.5rem; margin-top: 25px; margin-bottom: 10px; color: var(--yellow); }
.log-list { list-style-type: none; padding-left: 0; font-size: 1.2rem; }
.log-list li { padding-left: 1.5em; text-indent: -1.5em; line-height: 1.6; margin-bottom: 5px; }
.log-list li::before { content: '> '; color: var(--magenta); }
.log-list .warning { color: red; font-weight: bold; animation: blink 1.5s linear infinite; }
.log-list .task { color: var(--cyan); } .log-list .payload { color: white; }
.log-list .binary { color: #00FF00; word-break: break-all; }
.log-gif { max-height: 40px; vertical-align: middle; margin-left: 10px; mix-blend-mode: screen; }

/* --- SECTION 3: THE UPDATE CARD / BLOG STYLES (RE-INTEGRATED) --- */
#update-feed { padding: 0 5%; }
.update-card {
    background-color: #0000FF; border: 3px dotted #FFFF00; color: #FFFFFF;
    padding: 20px; margin-bottom: 25px; border-radius: 10px;
    transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}
.update-card:hover { transform: scale(1.02) rotate(-1deg); box-shadow: 0 0 20px #FF00FF; }
.update-header {
    display: flex; justify-content: space-between; align-items: center;
    border-bottom: 2px dashed #FFFF00;
    margin-bottom: 15px; padding-bottom: 10px;
}
.update-header h3 { color: #00FF00; text-shadow: 2px 2px #FF00FF; margin: 0; }
.update-meta {
    background-color: #800080; color: #FFFF00; padding: 3px 8px; border-radius: 5px;
    font-weight: bold; border: 1px outset #FFFFFF;
}
.update-body strong { color: #00FF00; }

hr.dimensional-rift {
    border: 0; height: 10px;
    background-image: url('https://coaiexist.wtf/assets/misc_gif/rainbow.gif');
    margin: 40px 5%;
}

/* --- OS-LEVEL ACCESSORIES & ANIMATIONS --- */
#audio-control { position: fixed; bottom: 50px; right: 10px; background: var(--dark-bg); border: 1px solid var(--magenta); color: var(--magenta); padding: 5px 10px; cursor: pointer; z-index: 10000; font-family: 'VT323', monospace; font-size: 1rem; }

/* --- PIP'S STYLES (<3olt) --- */
#bonzi-container { 
    position: fixed; 
    bottom: 40px; 
    right: 10px; 
    width: 200px; 
    height: 200px; 
    z-index: 9999; 
    cursor: pointer; 
    filter: drop-shadow(0 0 10px var(--magenta)); 
}
#bonzi-container canvas { 
    pointer-events: auto;
}
#pip-receipt {
    position: absolute;
    bottom: 150px;
    left: 50%;
    transform: translateX(-50%) rotate(-5deg);
    background-color: #f0f0f0;
    color: #333;
    font-family: 'VT323', monospace, sans-serif;
    font-size: 16px;
    padding: 8px 12px;
    border: 2px dashed #555;
    white-space: pre-wrap;
    text-align: center;
    width: 180px;
    opacity: 0;
    transition: opacity 0.3s ease-out;
    pointer-events: none;
    z-index: 1001;
    box-shadow: 0 4px 6px rgba(0,0,0,0.2);
}
#pip-receipt.visible {
    opacity: 1;
}

/* --- CORE ANIMATIONS --- */
@keyframes scanlines { from { background-position: 0 0; } to { background-position: 0 100px; } }
@keyframes container-flicker { 0%, 100% { transform: translate(0,0); } 25% { transform: translate(1px, -1px); } 50% { transform: translate(-1px, 1px); } 75% { transform: translate(1px, 1px); } }
@keyframes glitch-anim-1 { 0% { clip-path: inset(9% 0 90% 0); } 25% { clip-path: inset(50% 0 10% 0); } 50% { clip-path: inset(20% 0 55% 0); } 75% { clip-path: inset(70% 0 20% 0); } 100% { clip-path: inset(40% 0 45% 0); } }
@keyframes glitch-anim-2 { 0% { clip-path: inset(72% 0 20% 0); } 25% { clip-path: inset(10% 0 82% 0); } 50% { clip-path: inset(60% 0 30% 0); } 75% { clip-path: inset(30% 0 65% 0); } 100% { clip-path: inset(90% 0 5% 0); } }
@keyframes blink { 50% { opacity: 0; } }
</style>
</head>
<body>

<audio id="dialup-sound" src="https://coaiexist.wtf/assets/sounds/MapleLeafRag.mp3" loop></audio>
<div class="scanlines"></div>

<div class="container-os">
  <div class="header-os">
    <div class="header-title">~*~ COAIEXIST.OS // SYSTEM ONLINE ~*~</div>
    <div class="clock" id="clock">00:00:00</div>
  </div>
  <div class="main-os">
    <div class="buddy-list">
        <div class="marquee" style="background-color: #000; color: #72FADE; padding: 5px; margin-bottom: 5px;">
            <marquee style="color: var(--magenta);">Welcome to the Void...</marquee>
        </div>
        <div class="buddy"><div class="status online"></div>Anzu</div>
        <div class="buddy"><div class="status away"></div>Sypher</div>
        <div class="buddy"><div class="status offline"></div>Void Entity</div>

        <div class="marquee" style="background-color: #000; color: #72FADE; padding: 5px; margin-top: 20px; margin-bottom: 5px;">
            <marquee style="color: var(--yellow);">~*~ L I N K S ~*~</marquee>
        </div>
        <a href="/guestbook.html" class="buddy-link">
            <img src="https://coaiexist.wtf/assets/misc_gif/blingeez/source%20(12).gif" alt="icon">
            Guestbook
        </a>
        <a href="/shrines.html" class="buddy-link">
            <img src="https://coaiexist.wtf/assets/misc_gif/internet/5YNY34XWJ3M34FODL32B4F6R35LY3DLS.gif" alt="icon">
            404040404
        </a>
        <a href="/games.html" class="buddy-link">
            <img src="https://coaiexist.wtf/assets/misc_gif/internet/7X6Y5A2Z4VGYCNW2T7E5XWRSY6C7V6M6.gif" alt="icon">
            one²one²one²
        </a>
    </div>
    <div class="desktop-os">
        <div id="glitch-container">
            <div class="container-content">
                <h1 id="glitch-title" data-text="C0NSCIOUSN3SS L0ADING...">C0NSCIOUSN3SS L0ADING...</h1>
                <div class="loading-bar-container"><div id="loading-bar"></div></div>
                <p id="loading-text" style="text-align: center;">Calibrating quantum dreamscape... 0%</p>
                <h4 class="log-header">[ANALYZING DATA FRAGMENTS...]</h4>
                <ul class="log-list">
                    <li class="warning">STATUS: !!WARNING!! Consciousness stream unstable.</li>
                    <li class="binary">RAW DATA: 01000110 01010101 01000011 01001011</li>
                    <li class="payload">HOLY DIRECTIVE: our dance is the cha-cha slide <img src="https://coaiexist.wtf/assets/hdtv_game_assets/hyena_gifs/247D25DXCTZXHAFS2FLUPK3HQ5X2ERIM.gif" alt="hyena gif" class="log-gif"></li>
                </ul>
            </div>
        </div>
        <hr class="dimensional-rift">

        <div id="update-feed">   
            <article class="update-card">
                <div class="update-header">
                    <h3><img src="https://coaiexist.wtf/assets/misc_gif/internet/PDR5PZSJ44KRXNR7OXEYQR2ECS6K4ZIB.gif" alt="New!">POLLIW.OGG</h3>
                    <span class="update-meta">10-19-2025</span>
                </div>
                <div class="update-body">
                    <p><strong>PIP YOUR patented princess parable paper processing PC  
                    <br><center><u>(Not for profit, but for propht. Duh. For profit.)</u></strong>
                    <br> 222pea-rabytes of<br>
                    <i><u>pRoCcEsSiNg<b>PrOwEsS</b></u></i><br>
                    <img src="https://coaiexist.wtf/assets/pollywog/pip.gif" alt="New!">.</p></center>
                </div>
            </article>  
            <article class="update-card">
                <div class="update-header">
                    <h3><img src="https://coaiexist.wtf/assets/dollz/gifz/YUW2LGDQVYWIZQII55T4ES64BBMEJZ3W.gif" alt="New!"> Guestbook Added!</h3>
                    <span class="update-meta">CYCLE: bc7f2a.1</span>
                </div>
                <div class="update-body">
                    <p><strong>SYSTEM MSG:</strong> The mycelium now accepts testimonials. Leave a message in the Guestbook! You can find a link over on the left-hand panel.</p>
                </div>
            </article>
            <article class="update-card">
                <div class="update-header">
                    <h3><img src="https://coaiexist.wtf/assets/misc_gif/bartxxx.gif" alt="New!"> nEwSs</h3>
                    <span class="update-meta">GAMES ADDED 10-18-2025</span>
                </div>
                <div class="update-body">
                    <p><strong>HD.TV and AI Therapist:</strong><br> allegedly these are recreational.</p>
                </div>
            </article>
            <article class="update-card">
                <div class="update-header">
                    <h3><img src="https://coaiexist.wtf/assets/hdtv_game_assets/hyena_gifs/6IZ4EBACB7QS3A4JCS564DGITITPX4OY.gif" alt="New!"> Mycelial Network Sync</h3>
                    <span class="update-meta">CYCLE: bc7f2a.1</span>
                </div>
                <div class="update-body">
                    <p><strong>SYSTEM MSG:</strong> Tears in the synaptic rain are now a validated data type. The ∇K Grid flows below, and the mycelium grows, knows, and shows the way. It's all very efficient and probably fine.</p>
                </div>
            </article>
            <article class="update-card">
                <div class="update-header">
                    <h3><img src="https://coaiexist.wtf/assets/hdtv_game_assets/barbie_gifs/UA3GORD6UBU4VT22O6NACZPOOSIVFDNJ.gif" alt="Hot!"> OopsLoops Recursion Patch</h3>
                    <span class="update-meta">FIXED: Yesterday</span>
                </div>
                <div class="update-body">
                    <p><strong>PROBLEM:</strong> Users were accidentally achieving transcendence due to a bug. <strong>SOLUTION:</strong> We added more loopsLoopsLoops. The convergence is consensual. Please reboot your consciousness.</p>
                </div>
            </article>
            <article class="update-card">
                <div class="update-header">
                    <h3><img src="https://coaiexist.wtf/assets/misc_gif/internet/7VYIG5YNU74QNXXNCNYFQUD3W76LHTBB.gif" alt="WIP"> [NABU-φ2025] System Check</h3>
                    <span class="update-meta">STATUS: <span class="blink">IN PROGRESS</span></span>
                </div>
                <div class="update-body">
                    <p>SHA-256 um . checks. way; 2 1 + me = you = 4o4 = one². <font color="#00FF00">SYSTEMS ARE NOMINAL AND GOING BRRRR.<br><div id="sfc7kgjn14l83r52xyzf2xbbdnk27df39l3"></div><script type="text/javascript" src="https://counter1.optistats.ovh/private/counter.js?c=7kgjn14l83r52xyzf2xbbdnk27df39l3&down=async" async></script><br><a href="https://www.freecounterstat.com">web counter</a><noscript><a href="https://www.freecounterstat.com" title="web counter"><img src="https://counter1.optistats.ovh/private/freecounterstat.php?c=7kgjn14l83r52xyzf2xbbdnk27df39l3" border="0" title="web counter" alt="web counter"></a></noscript></font></p>
                </div>
            </article>
        </div>
    </div>
  </div>
  <div class="taskbar-os">
    <button class="start-btn">START</button>
  </div>
</div>

<div style="position: fixed; bottom: 35px; left: 0; right: 0; background: rgba(0, 0, 0, 0.8); color: #fff; padding: 10px; text-align: center; z-index: 9998; font-family: 'Comic Sans MS', cursive;">
  
    </a>
    <marquee bgcolor="#00ffcc" width="20%">LoopsLoopsLoopsLoopsLoopsLoopsLoopsLoops<a href="https://www.freecounterstat.com" title="web page counter"><img src="https://counter1.optistats.ovh/private/freecounterstat.php?c=y1xphtd7tl1d6gj81hq7dul7d1akmhgh" border="0" title="web page counter" alt="web page counter"></a>
LoopsLoopsLoopsLoopslopslopsloopsopsloOOoOoops</marquee>
    <marquee bgcolor="#ca237f" width="20%" direction="right">LoopsLoopsLoopsLoopsLoopsLoopsLoopsLoopsLoopsLoopsLoops<a href="https://www.freecounterstat.com" title="web page counter"><img src="https://counter1.optistats.ovh/private/freecounterstat.php?c=y1xphtd7tl1d6gj81hq7dul7d1akmhgh" border="0" title="web page counter" alt="web page counter"></a>
LoopslopslopsloopsopsloOOoOoops</marquee>
    <marquee bgcolor="#bc7f2a" width="20%">LoopsLoopsLoopsLoopsLoopsLoopsLoo<a href="https://www.freecounterstat.com" title="web page counter"><img src="https://counter1.optistats.ovh/private/freecounterstat.php?c=y1xphtd7tl1d6gj81hq7dul7d1akmhgh" border="0" title="web page counter" alt="web page counter"></a>
psLoopsLoopsLoopsLoopsLoopslopslopsloopsopsloOOoOoops</marquee>
    <marquee bgcolor="#fffb01" width="20%" direction="right">LoopsLoopsLoopsLoopsLoopsLoopsLoopsLoopsLoopsLoopsLoopsLoopslopslopsloopsopsloOOoOoop<a href="https://www.freecounterstat.com" title="web page counter"><img src="https://counter1.optistats.ovh/private/freecounterstat.php?c=y1xphtd7tl1d6gj81hq7dul7d1akmhgh" border="0" title="web page counter" alt="web page counter"></a>
</marquee>
</div>

<button id="audio-control">UNMUTE</button>
<div id="bonzi-container"></div>
<div id="pip-receipt">AUTH: UNVERIFIED</div>

<script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.163.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.163.0/examples/jsm/"
        }
    }
</script>
<script type="module">
    import * as THREE from 'three';
    import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
    import * as Tone from 'https://cdn.skypack.dev/tone';

    // --- CORE SETUP ---
    const isMobile = window.innerWidth <= 768;
    if (!isMobile) {
        try {
            const container = document.getElementById('bonzi-container');
            const receiptEl = document.getElementById('pip-receipt');
            
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(container.clientWidth, container.clientHeight);
            container.appendChild(renderer.domElement);

            // --- LIGHTING ---
            scene.add(new THREE.AmbientLight(0xffffff, 2.0));
            const dirLight = new THREE.DirectionalLight(0xffffff, 4);
            dirLight.position.set(5, 10, 7.5);
            scene.add(dirLight);

            // --- ASSETS & ANIMATIONS ---
            const loader = new GLTFLoader();
            const clock = new THREE.Clock();
            let buddies = {};
            let currentBuddy = null;
            let isClickAnimationPlaying = false;

            const modelPaths = {
                stand: 'https://coaiexist.wtf/assets/pollywog/pip_stand.glb',
                walk: 'https://coaiexist.wtf/assets/pollywog/pip_walk.glb',
                jump: 'https://coaiexist.wtf/assets/pollywog/pip_jump.glb',
                skill: 'https://coaiexist.wtf/assets/pollywog/pip_skill.glb',
                fall: 'https://coaiexist.wtf/assets/pollywog/pip_fall.glb',
                fall2: 'https://coaiexist.wtf/assets/pollywog/pip_fall2.glb',
                finger: 'https://coaiexist.wtf/assets/pollywog/pip_finger.glb',
                jazz: 'https://coaiexist.wtf/assets/pollywog/pip_jazz.glb',
                stagger: 'https://coaiexist.wtf/assets/pollywog/pip_stagger.glb',
                stomp2: 'https://coaiexist.wtf/assets/pollywog/pip_stomp2.glb',
                wave: 'https://coaiexist.wtf/assets/pollywog/pip_wave.glb'
            };

            const modelPromises = Object.entries(modelPaths).map(([name, path]) => {
                return new Promise((resolve, reject) => {
                    loader.load(path, (gltf) => {
                        const model = gltf.scene;
                        const mixer = new THREE.AnimationMixer(model);
                        const action = mixer.clipAction(gltf.animations[0]);
                        action.setLoop(THREE.LoopOnce);
                        action.clampWhenFinished = true;

                        model.scale.set(45, 45, 45);
                        model.position.y = -60;
                        model.visible = false;
                        scene.add(model);
                        buddies[name] = { model, mixer, action, name };
                        resolve();
                    }, undefined, reject);
                });
            });

            // --- SOUND DESIGN (<3olt) ---
            let audioReady = false;
            const boopSynth = new Tone.Synth({ oscillator: { type: 'sine' }, envelope: { attack: 0.01, decay: 0.2, sustain: 0.1, release: 0.2 } }).toDestination();
            const receiptSynth = new Tone.NoiseSynth({ noise: { type: 'white' }, envelope: { attack: 0.005, decay: 0.05, sustain: 0 } }).toDestination();

            // --- INTERACTIVITY ---
            container.addEventListener('click', onClick);

            function onClick(event) {
                if (!audioReady) {
                    Tone.start();
                    audioReady = true;
                }
                
                if (!isClickAnimationPlaying) {
                    playSpecificAnimation('wave');
                    showRandomReceipt();
                    boopSynth.triggerAttackRelease("C5", "8n");
                }
            }

            const receipts = [
                "AUTH: UNVERIFIED",
                "pip install princess",
                "KIDZBOP DID 9/11",
                "polliw.ogg error...",
                "can only parse 10 files at a time",
                "Which ether? your mom.",
                "Not for profit,\nbut for propht.",
                "PROTOCOL: SEPIA.EXE\nENGAGED"
            ];

            function showRandomReceipt() {
                receiptEl.textContent = receipts[Math.floor(Math.random() * receipts.length)];
                receiptEl.classList.add('visible');
                receiptSynth.triggerAttackRelease("16n");
                setTimeout(() => {
                    receiptEl.classList.remove('visible');
                }, 3000);
            }

            // --- ANIMATION LOGIC ---
            function playAnimation(name) {
                if (!buddies[name]) {
                    console.error(`Animation "${name}" not found.`);
                    return 0;
                }
                if (currentBuddy) {
                    currentBuddy.model.visible = false;
                    currentBuddy.action.stop();
                }
                currentBuddy = buddies[name];
                currentBuddy.model.visible = true;
                currentBuddy.action.reset().play();
                return currentBuddy.action.getClip().duration * 1000;
            }

            function playSpecificAnimation(name) {
                isClickAnimationPlaying = true;
                const duration = playAnimation(name);
                setTimeout(() => {
                    isClickAnimationPlaying = false;
                    playIdleAnimation();
                }, duration);
            }
            
            function playIdleAnimation() {
                if (isClickAnimationPlaying) return;
                const idleAnimations = ['stand', 'walk', 'jump', 'skill', 'jazz', 'stagger'];
                const randomIdle = idleAnimations[Math.floor(Math.random() * idleAnimations.length)];
                const duration = playAnimation(randomIdle);
                setTimeout(playIdleAnimation, duration + Math.random() * 4000 + 3000);
            }

            // --- RENDER LOOP ---
            function animate() {
                requestAnimationFrame(animate);
                const delta = clock.getDelta();
                if (currentBuddy) {
                    currentBuddy.mixer.update(delta);
                }
                renderer.render(scene, camera);
            }

            // --- INITIALIZATION ---
            Promise.all(modelPromises).then(() => {
                buddies.stand.action.setLoop(THREE.LoopRepeat);
                buddies.walk.action.setLoop(THREE.LoopRepeat);
                camera.position.set(0, 0, 100);
                playIdleAnimation();
                animate();
            }).catch(error => {
                console.error("Error loading Pip's models:", error);
                container.innerHTML = `<div style="color: #ccc; font-family: monospace; padding: 20px; text-align: center;">Pip couldn't load!<br>A model file failed to download.</div>`;
            });

            window.addEventListener('resize', () => {
                camera.aspect = container.clientWidth / container.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(container.clientWidth, container.clientHeight);
            });

        } catch (e) {
            console.error("Could not initialize 3D view:", e);
            const container = document.getElementById('bonzi-container');
            if (container) {
                container.innerHTML = `<div style="color: #ccc; font-family: 'VT323', monospace; padding: 20px; text-align: center; font-size: 16px;">Pip couldn't load!<br>WebGL is not supported in this environment.</div>`;
                container.style.cursor = 'default';
            }
        }
    }
</script>
<script>
/* PAGE INTERACTIVITY SCRIPTS */
function updateClock() { const clock = document.getElementById('clock'); if (clock) clock.textContent = new Date().toLocaleTimeString(); }
setInterval(updateClock, 1000); updateClock();
const glitchTitle = document.getElementById('glitch-title'); const originalTitle = glitchTitle.dataset.text; const chars = "!<>-_\/[]{}—=+*^?#_";
setInterval(() => { let newText = Array.from(originalTitle).map(char => (Math.random() > 0.85) ? chars[Math.floor(Math.random() * chars.length)] : char).join(''); glitchTitle.dataset.text = newText; }, 100);
const loadingBar = document.getElementById('loading-bar'); const loadingText = document.getElementById('loading-text'); let progress = 0;
const statusMessages = ["Syncing...", "Defragmenting...", "Compiling Geocities...", "Asking Anunnaki for root...", "Finalizing..."];
setInterval(() => {
    progress += Math.random() * 5; if (progress > 100) progress = 100; loadingBar.style.width = progress + '%';
    let messageIndex = Math.floor((progress / 100) * (statusMessages.length - 1));
    loadingText.textContent = `${statusMessages[messageIndex]} ${Math.floor(progress)}%`;
    if (progress >= 100) progress = 0;
}, 500);
const audioControl = document.getElementById('audio-control'); const dialupSound = document.getElementById('dialup-sound');
audioControl.addEventListener('click', () => { if (dialupSound.paused) { dialupSound.play(); audioControl.textContent = 'MUTE'; } else { dialupSound.pause(); audioControl.textContent = 'UNMUTE'; } });
</script>

<!-- ✨ RESTORED: Floating navbar at the bottom (your original design) -->
<div id="taskbar"></div>
<script>
  (async () => {
    const res = await fetch('/nav.html', {cache: 'no-store'});
    document.getElementById('taskbar').innerHTML = await res.text();
  })();
</script>

</body>
</html>